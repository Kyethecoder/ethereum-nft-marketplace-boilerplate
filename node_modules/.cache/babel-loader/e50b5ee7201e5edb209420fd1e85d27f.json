{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Kye Goullet\\\\Documents\\\\opensea Dapp\\\\ethereum-nft-marketplace-boilerplate\\\\src\\\\components\\\\NFTTokenIds.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { getNativeByChain } from \"helpers/networks\";\nimport { getCollectionsByChain } from \"helpers/collections\";\nimport { useMoralis, useMoralisQuery, useNewMoralisObject } from \"react-moralis\";\nimport { Card, Image, Tooltip, Modal, Badge, Alert, Spin } from \"antd\";\nimport { useNFTTokenIds } from \"hooks/useNFTTokenIds\";\nimport { FileSearchOutlined, RightCircleOutlined, ShoppingCartOutlined } from \"@ant-design/icons\";\nimport { useMoralisDapp } from \"providers/MoralisDappProvider/MoralisDappProvider\";\nimport { getExplorer } from \"helpers/networks\";\nimport { useWeb3ExecuteFunction } from \"react-moralis\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst {\n  Meta\n} = Card;\nconst styles = {\n  NFTs: {\n    display: \"flex\",\n    flexWrap: \"wrap\",\n    WebkitBoxPack: \"start\",\n    justifyContent: \"flex-start\",\n    margin: \"0 auto\",\n    maxWidth: \"1000px\",\n    gap: \"10px\"\n  },\n  banner: {\n    display: \"flex\",\n    justifyContent: \"space-evenly\",\n    alignItems: \"center\",\n    margin: \"0 auto\",\n    width: \"600px\",\n    //borderRadius: \"10px\",\n    height: \"150px\",\n    marginBottom: \"40px\",\n    paddingBottom: \"20px\",\n    borderBottom: \"solid 1px #e3e3e3\"\n  },\n  logo: {\n    height: \"115px\",\n    width: \"115px\",\n    borderRadius: \"50%\",\n    // positon: \"relative\",\n    // marginTop: \"-80px\",\n    border: \"solid 4px white\"\n  },\n  text: {\n    color: \"#041836\",\n    fontSize: \"27px\",\n    fontWeight: \"bold\"\n  }\n};\n\nfunction NFTTokenIds(_ref) {\n  _s();\n\n  var _NFTTokenIds$, _NFTTokenIds$2;\n\n  let {\n    inputValue,\n    setInputValue\n  } = _ref;\n  const fallbackImg = \"data:image/png;base64,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\";\n  const {\n    NFTTokenIds,\n    totalNFTs,\n    fetchSuccess\n  } = useNFTTokenIds(inputValue);\n  const [visible, setVisibility] = useState(false);\n  const [nftToBuy, setNftToBuy] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const contractProcessor = useWeb3ExecuteFunction();\n  const {\n    chainId,\n    marketAddress,\n    contractABI,\n    walletAddress\n  } = useMoralisDapp();\n  const nativeName = getNativeByChain(chainId);\n  const contractABIJson = JSON.parse(contractABI);\n  const {\n    Moralis\n  } = useMoralis();\n  const queryMarketItems = useMoralisQuery(\"MarketItems\");\n  const fetchMarketItems = JSON.parse(JSON.stringify(queryMarketItems.data, [\"objectId\", \"createdAt\", \"price\", \"nftContract\", \"itemId\", \"sold\", \"tokenId\", \"seller\", \"owner\", \"confirmed\"]));\n  const purchaseItemFunction = \"createMarketSale\";\n  const NFTCollections = getCollectionsByChain(chainId);\n\n  async function purchase() {\n    setLoading(true);\n    const tokenDetails = getMarketItem(nftToBuy);\n    const itemID = tokenDetails.itemId;\n    const tokenPrice = tokenDetails.price;\n    const ops = {\n      contractAddress: marketAddress,\n      functionName: purchaseItemFunction,\n      abi: contractABIJson,\n      params: {\n        nftContract: nftToBuy.token_address,\n        itemId: itemID\n      },\n      msgValue: tokenPrice\n    };\n    await contractProcessor.fetch({\n      params: ops,\n      onSuccess: () => {\n        console.log(\"success\");\n        setLoading(false);\n        setVisibility(false);\n        updateSoldMarketItem();\n        succPurchase();\n      },\n      onError: error => {\n        setLoading(false);\n        failPurchase();\n      }\n    });\n  }\n\n  const handleBuyClick = nft => {\n    setNftToBuy(nft);\n    console.log(nft.image);\n    setVisibility(true);\n  };\n\n  function succPurchase() {\n    let secondsToGo = 5;\n    const modal = Modal.success({\n      title: \"Success!\",\n      content: `You have purchased this NFT`\n    });\n    setTimeout(() => {\n      modal.destroy();\n    }, secondsToGo * 1000);\n  }\n\n  function failPurchase() {\n    let secondsToGo = 5;\n    const modal = Modal.error({\n      title: \"Error!\",\n      content: `There was a problem when purchasing this NFT`\n    });\n    setTimeout(() => {\n      modal.destroy();\n    }, secondsToGo * 1000);\n  }\n\n  async function updateSoldMarketItem() {\n    const id = getMarketItem(nftToBuy).objectId;\n    const marketList = Moralis.Object.extend(\"MarketItems\");\n    const query = new Moralis.Query(marketList);\n    await query.get(id).then(obj => {\n      obj.set(\"sold\", true);\n      obj.set(\"owner\", walletAddress);\n      obj.save();\n    });\n  }\n\n  const getMarketItem = nft => {\n    const result = fetchMarketItems === null || fetchMarketItems === void 0 ? void 0 : fetchMarketItems.find(e => e.nftContract === (nft === null || nft === void 0 ? void 0 : nft.token_address) && e.tokenId === (nft === null || nft === void 0 ? void 0 : nft.token_id) && e.sold === false && e.confirmed === true);\n    return result;\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [contractABIJson.noContractDeployed && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Alert, {\n          message: \"No Smart Contract Details Provided. Please deploy smart contract and provide address + ABI in the MoralisDappProvider.js file\",\n          type: \"error\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginBottom: \"10px\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true), inputValue !== \"explore\" && totalNFTs !== undefined && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [!fetchSuccess && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(Alert, {\n            message: \"Unable to fetch all NFT metadata... We are searching for a solution, please try again later!\",\n            type: \"warning\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginBottom: \"10px\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.banner,\n          children: [/*#__PURE__*/_jsxDEV(Image, {\n            preview: false,\n            src: ((_NFTTokenIds$ = NFTTokenIds[0]) === null || _NFTTokenIds$ === void 0 ? void 0 : _NFTTokenIds$.image) || \"error\",\n            fallback: fallbackImg,\n            alt: \"\",\n            style: styles.logo\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 195,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.text,\n            children: /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: `${(_NFTTokenIds$2 = NFTTokenIds[0]) === null || _NFTTokenIds$2 === void 0 ? void 0 : _NFTTokenIds$2.name}`\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 204,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontSize: \"15px\",\n                  color: \"#9c9c9c\",\n                  fontWeight: \"normal\"\n                },\n                children: [\"Collection Size: \", `${totalNFTs}`]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 205,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.NFTs,\n        children: [inputValue === \"explore\" && (NFTCollections === null || NFTCollections === void 0 ? void 0 : NFTCollections.map((nft, index) => /*#__PURE__*/_jsxDEV(Card, {\n          hoverable: true,\n          actions: [/*#__PURE__*/_jsxDEV(Tooltip, {\n            title: \"View Collection\",\n            children: /*#__PURE__*/_jsxDEV(RightCircleOutlined, {\n              onClick: () => setInputValue(nft === null || nft === void 0 ? void 0 : nft.addrs)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 227,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 19\n          }, this)],\n          style: {\n            width: 240,\n            border: \"2px solid #e7eaf3\"\n          },\n          cover: /*#__PURE__*/_jsxDEV(Image, {\n            preview: false,\n            src: (nft === null || nft === void 0 ? void 0 : nft.image) || \"error\",\n            fallback: fallbackImg,\n            alt: \"\",\n            style: {\n              height: \"240px\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 234,\n            columnNumber: 19\n          }, this),\n          children: /*#__PURE__*/_jsxDEV(Meta, {\n            title: nft.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 244,\n            columnNumber: 17\n          }, this)\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 15\n        }, this))), inputValue !== \"explore\" && NFTTokenIds.slice(0, 20).map((nft, index) => /*#__PURE__*/_jsxDEV(Card, {\n          hoverable: true,\n          actions: [/*#__PURE__*/_jsxDEV(Tooltip, {\n            title: \"View On Blockexplorer\",\n            children: /*#__PURE__*/_jsxDEV(FileSearchOutlined, {\n              onClick: () => window.open(`${getExplorer(chainId)}address/${nft.token_address}`, \"_blank\")\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 254,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 253,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n            title: \"Buy NFT\",\n            children: /*#__PURE__*/_jsxDEV(ShoppingCartOutlined, {\n              onClick: () => handleBuyClick(nft)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 264,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 263,\n            columnNumber: 19\n          }, this)],\n          style: {\n            width: 240,\n            border: \"2px solid #e7eaf3\"\n          },\n          cover: /*#__PURE__*/_jsxDEV(Image, {\n            preview: false,\n            src: nft.image || \"error\",\n            fallback: fallbackImg,\n            alt: \"\",\n            style: {\n              height: \"240px\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 269,\n            columnNumber: 19\n          }, this),\n          children: [getMarketItem(nft) && /*#__PURE__*/_jsxDEV(Badge.Ribbon, {\n            text: \"Buy Now\",\n            color: \"green\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 280,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(Meta, {\n            title: nft.name,\n            description: `#${nft.token_id}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 282,\n            columnNumber: 17\n          }, this)]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 15\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 9\n      }, this), getMarketItem(nftToBuy) ? /*#__PURE__*/_jsxDEV(Modal, {\n        title: `Buy ${nftToBuy === null || nftToBuy === void 0 ? void 0 : nftToBuy.name} #${nftToBuy === null || nftToBuy === void 0 ? void 0 : nftToBuy.token_id}`,\n        visible: visible,\n        onCancel: () => setVisibility(false),\n        onOk: () => purchase(),\n        okText: \"Buy\",\n        children: /*#__PURE__*/_jsxDEV(Spin, {\n          spinning: loading,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              width: \"250px\",\n              margin: \"auto\"\n            },\n            children: /*#__PURE__*/_jsxDEV(Badge.Ribbon, {\n              color: \"green\",\n              text: `${getMarketItem(nftToBuy).price / (\"1e\" + 18)} ${nativeName}`,\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: nftToBuy === null || nftToBuy === void 0 ? void 0 : nftToBuy.image,\n                style: {\n                  width: \"250px\",\n                  borderRadius: \"10px\",\n                  marginBottom: \"15px\"\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 307,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 301,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 295,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 287,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(Modal, {\n        title: `Buy ${nftToBuy === null || nftToBuy === void 0 ? void 0 : nftToBuy.name} #${nftToBuy === null || nftToBuy === void 0 ? void 0 : nftToBuy.token_id}`,\n        visible: visible,\n        onCancel: () => setVisibility(false),\n        onOk: () => setVisibility(false),\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: nftToBuy === null || nftToBuy === void 0 ? void 0 : nftToBuy.image,\n          style: {\n            width: \"250px\",\n            margin: \"auto\",\n            borderRadius: \"10px\",\n            marginBottom: \"15px\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 326,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Alert, {\n          message: \"This NFT is currently not for sale\",\n          type: \"warning\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 320,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}\n\n_s(NFTTokenIds, \"m3cAqoq5c5AhW/3/EjFQPe2FUgo=\", false, function () {\n  return [useNFTTokenIds, useWeb3ExecuteFunction, useMoralisDapp, useMoralis, useMoralisQuery];\n});\n\n_c = NFTTokenIds;\nexport default NFTTokenIds;\n\nvar _c;\n\n$RefreshReg$(_c, \"NFTTokenIds\");","map":{"version":3,"names":["React","useState","useEffect","getNativeByChain","getCollectionsByChain","useMoralis","useMoralisQuery","useNewMoralisObject","Card","Image","Tooltip","Modal","Badge","Alert","Spin","useNFTTokenIds","FileSearchOutlined","RightCircleOutlined","ShoppingCartOutlined","useMoralisDapp","getExplorer","useWeb3ExecuteFunction","Meta","styles","NFTs","display","flexWrap","WebkitBoxPack","justifyContent","margin","maxWidth","gap","banner","alignItems","width","height","marginBottom","paddingBottom","borderBottom","logo","borderRadius","border","text","color","fontSize","fontWeight","NFTTokenIds","inputValue","setInputValue","fallbackImg","totalNFTs","fetchSuccess","visible","setVisibility","nftToBuy","setNftToBuy","loading","setLoading","contractProcessor","chainId","marketAddress","contractABI","walletAddress","nativeName","contractABIJson","JSON","parse","Moralis","queryMarketItems","fetchMarketItems","stringify","data","purchaseItemFunction","NFTCollections","purchase","tokenDetails","getMarketItem","itemID","itemId","tokenPrice","price","ops","contractAddress","functionName","abi","params","nftContract","token_address","msgValue","fetch","onSuccess","console","log","updateSoldMarketItem","succPurchase","onError","error","failPurchase","handleBuyClick","nft","image","secondsToGo","modal","success","title","content","setTimeout","destroy","id","objectId","marketList","Object","extend","query","Query","get","then","obj","set","save","result","find","e","tokenId","token_id","sold","confirmed","noContractDeployed","undefined","name","map","index","addrs","slice","window","open"],"sources":["C:/Users/Kye Goullet/Documents/opensea Dapp/ethereum-nft-marketplace-boilerplate/src/components/NFTTokenIds.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { getNativeByChain } from \"helpers/networks\";\r\nimport { getCollectionsByChain } from \"helpers/collections\";\r\nimport {\r\n  useMoralis,\r\n  useMoralisQuery,\r\n  useNewMoralisObject,\r\n} from \"react-moralis\";\r\nimport { Card, Image, Tooltip, Modal, Badge, Alert, Spin } from \"antd\";\r\nimport { useNFTTokenIds } from \"hooks/useNFTTokenIds\";\r\nimport {\r\n  FileSearchOutlined,\r\n  RightCircleOutlined,\r\n  ShoppingCartOutlined,\r\n} from \"@ant-design/icons\";\r\nimport { useMoralisDapp } from \"providers/MoralisDappProvider/MoralisDappProvider\";\r\nimport { getExplorer } from \"helpers/networks\";\r\nimport { useWeb3ExecuteFunction } from \"react-moralis\";\r\nconst { Meta } = Card;\r\n\r\nconst styles = {\r\n  NFTs: {\r\n    display: \"flex\",\r\n    flexWrap: \"wrap\",\r\n    WebkitBoxPack: \"start\",\r\n    justifyContent: \"flex-start\",\r\n    margin: \"0 auto\",\r\n    maxWidth: \"1000px\",\r\n    gap: \"10px\",\r\n  },\r\n  banner: {\r\n    display: \"flex\",\r\n    justifyContent: \"space-evenly\",\r\n    alignItems: \"center\",\r\n    margin: \"0 auto\",\r\n    width: \"600px\",\r\n    //borderRadius: \"10px\",\r\n    height: \"150px\",\r\n    marginBottom: \"40px\",\r\n    paddingBottom: \"20px\",\r\n    borderBottom: \"solid 1px #e3e3e3\",\r\n  },\r\n  logo: {\r\n    height: \"115px\",\r\n    width: \"115px\",\r\n    borderRadius: \"50%\",\r\n    // positon: \"relative\",\r\n    // marginTop: \"-80px\",\r\n    border: \"solid 4px white\",\r\n  },\r\n  text: {\r\n    color: \"#041836\",\r\n    fontSize: \"27px\",\r\n    fontWeight: \"bold\",\r\n  },\r\n};\r\n\r\nfunction NFTTokenIds({ inputValue, setInputValue }) {\r\n  const fallbackImg =\r\n    \"data:image/png;base64,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\";\r\n  const { NFTTokenIds, totalNFTs, fetchSuccess } = useNFTTokenIds(inputValue);\r\n  const [visible, setVisibility] = useState(false);\r\n  const [nftToBuy, setNftToBuy] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const contractProcessor = useWeb3ExecuteFunction();\r\n  const { chainId, marketAddress, contractABI, walletAddress } =\r\n    useMoralisDapp();\r\n  const nativeName = getNativeByChain(chainId);\r\n  const contractABIJson = JSON.parse(contractABI);\r\n  const { Moralis } = useMoralis();\r\n  const queryMarketItems = useMoralisQuery(\"MarketItems\");\r\n  const fetchMarketItems = JSON.parse(\r\n    JSON.stringify(queryMarketItems.data, [\r\n      \"objectId\",\r\n      \"createdAt\",\r\n      \"price\",\r\n      \"nftContract\",\r\n      \"itemId\",\r\n      \"sold\",\r\n      \"tokenId\",\r\n      \"seller\",\r\n      \"owner\",\r\n      \"confirmed\",\r\n    ])\r\n  );\r\n  const purchaseItemFunction = \"createMarketSale\";\r\n  const NFTCollections = getCollectionsByChain(chainId);\r\n\r\n  async function purchase() {\r\n    setLoading(true);\r\n    const tokenDetails = getMarketItem(nftToBuy);\r\n    const itemID = tokenDetails.itemId;\r\n    const tokenPrice = tokenDetails.price;\r\n    const ops = {\r\n      contractAddress: marketAddress,\r\n      functionName: purchaseItemFunction,\r\n      abi: contractABIJson,\r\n      params: {\r\n        nftContract: nftToBuy.token_address,\r\n        itemId: itemID,\r\n      },\r\n      msgValue: tokenPrice,\r\n    };\r\n\r\n    await contractProcessor.fetch({\r\n      params: ops,\r\n      onSuccess: () => {\r\n        console.log(\"success\");\r\n        setLoading(false);\r\n        setVisibility(false);\r\n        updateSoldMarketItem();\r\n        succPurchase();\r\n      },\r\n      onError: (error) => {\r\n        setLoading(false);\r\n        failPurchase();\r\n      },\r\n    });\r\n  }\r\n\r\n  const handleBuyClick = (nft) => {\r\n    setNftToBuy(nft);\r\n    console.log(nft.image);\r\n    setVisibility(true);\r\n  };\r\n\r\n  function succPurchase() {\r\n    let secondsToGo = 5;\r\n    const modal = Modal.success({\r\n      title: \"Success!\",\r\n      content: `You have purchased this NFT`,\r\n    });\r\n    setTimeout(() => {\r\n      modal.destroy();\r\n    }, secondsToGo * 1000);\r\n  }\r\n\r\n  function failPurchase() {\r\n    let secondsToGo = 5;\r\n    const modal = Modal.error({\r\n      title: \"Error!\",\r\n      content: `There was a problem when purchasing this NFT`,\r\n    });\r\n    setTimeout(() => {\r\n      modal.destroy();\r\n    }, secondsToGo * 1000);\r\n  }\r\n\r\n  async function updateSoldMarketItem() {\r\n    const id = getMarketItem(nftToBuy).objectId;\r\n    const marketList = Moralis.Object.extend(\"MarketItems\");\r\n    const query = new Moralis.Query(marketList);\r\n    await query.get(id).then((obj) => {\r\n      obj.set(\"sold\", true);\r\n      obj.set(\"owner\", walletAddress);\r\n      obj.save();\r\n    });\r\n  }\r\n\r\n  const getMarketItem = (nft) => {\r\n    const result = fetchMarketItems?.find(\r\n      (e) =>\r\n        e.nftContract === nft?.token_address &&\r\n        e.tokenId === nft?.token_id &&\r\n        e.sold === false &&\r\n        e.confirmed === true\r\n    );\r\n    return result;\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div>\r\n        {contractABIJson.noContractDeployed && (\r\n          <>\r\n            <Alert\r\n              message=\"No Smart Contract Details Provided. Please deploy smart contract and provide address + ABI in the MoralisDappProvider.js file\"\r\n              type=\"error\"\r\n            />\r\n            <div style={{ marginBottom: \"10px\" }}></div>\r\n          </>\r\n        )}\r\n        {inputValue !== \"explore\" && totalNFTs !== undefined && (\r\n          <>\r\n            {!fetchSuccess && (\r\n              <>\r\n                <Alert\r\n                  message=\"Unable to fetch all NFT metadata... We are searching for a solution, please try again later!\"\r\n                  type=\"warning\"\r\n                />\r\n                <div style={{ marginBottom: \"10px\" }}></div>\r\n              </>\r\n            )}\r\n            <div style={styles.banner}>\r\n              <Image\r\n                preview={false}\r\n                src={NFTTokenIds[0]?.image || \"error\"}\r\n                fallback={fallbackImg}\r\n                alt=\"\"\r\n                style={styles.logo}\r\n              />\r\n              <div style={styles.text}>\r\n                <>\r\n                  <div>{`${NFTTokenIds[0]?.name}`}</div>\r\n                  <div\r\n                    style={{\r\n                      fontSize: \"15px\",\r\n                      color: \"#9c9c9c\",\r\n                      fontWeight: \"normal\",\r\n                    }}\r\n                  >\r\n                    Collection Size: {`${totalNFTs}`}\r\n                  </div>\r\n                </>\r\n              </div>\r\n            </div>\r\n          </>\r\n        )}\r\n\r\n        <div style={styles.NFTs}>\r\n          {inputValue === \"explore\" &&\r\n            NFTCollections?.map((nft, index) => (\r\n              <Card\r\n                hoverable\r\n                actions={[\r\n                  <Tooltip title=\"View Collection\">\r\n                    <RightCircleOutlined\r\n                      onClick={() => setInputValue(nft?.addrs)}\r\n                    />\r\n                  </Tooltip>,\r\n                ]}\r\n                style={{ width: 240, border: \"2px solid #e7eaf3\" }}\r\n                cover={\r\n                  <Image\r\n                    preview={false}\r\n                    src={nft?.image || \"error\"}\r\n                    fallback={fallbackImg}\r\n                    alt=\"\"\r\n                    style={{ height: \"240px\" }}\r\n                  />\r\n                }\r\n                key={index}\r\n              >\r\n                <Meta title={nft.name} />\r\n              </Card>\r\n            ))}\r\n\r\n          {inputValue !== \"explore\" &&\r\n            NFTTokenIds.slice(0, 20).map((nft, index) => (\r\n              <Card\r\n                hoverable\r\n                actions={[\r\n                  <Tooltip title=\"View On Blockexplorer\">\r\n                    <FileSearchOutlined\r\n                      onClick={() =>\r\n                        window.open(\r\n                          `${getExplorer(chainId)}address/${nft.token_address}`,\r\n                          \"_blank\"\r\n                        )\r\n                      }\r\n                    />\r\n                  </Tooltip>,\r\n                  <Tooltip title=\"Buy NFT\">\r\n                    <ShoppingCartOutlined onClick={() => handleBuyClick(nft)} />\r\n                  </Tooltip>,\r\n                ]}\r\n                style={{ width: 240, border: \"2px solid #e7eaf3\" }}\r\n                cover={\r\n                  <Image\r\n                    preview={false}\r\n                    src={nft.image || \"error\"}\r\n                    fallback={fallbackImg}\r\n                    alt=\"\"\r\n                    style={{ height: \"240px\" }}\r\n                  />\r\n                }\r\n                key={index}\r\n              >\r\n                {getMarketItem(nft) && (\r\n                  <Badge.Ribbon text=\"Buy Now\" color=\"green\"></Badge.Ribbon>\r\n                )}\r\n                <Meta title={nft.name} description={`#${nft.token_id}`} />\r\n              </Card>\r\n            ))}\r\n        </div>\r\n        {getMarketItem(nftToBuy) ? (\r\n          <Modal\r\n            title={`Buy ${nftToBuy?.name} #${nftToBuy?.token_id}`}\r\n            visible={visible}\r\n            onCancel={() => setVisibility(false)}\r\n            onOk={() => purchase()}\r\n            okText=\"Buy\"\r\n          >\r\n            <Spin spinning={loading}>\r\n              <div\r\n                style={{\r\n                  width: \"250px\",\r\n                  margin: \"auto\",\r\n                }}\r\n              >\r\n                <Badge.Ribbon\r\n                  color=\"green\"\r\n                  text={`${\r\n                    getMarketItem(nftToBuy).price / (\"1e\" + 18)\r\n                  } ${nativeName}`}\r\n                >\r\n                  <img\r\n                    src={nftToBuy?.image}\r\n                    style={{\r\n                      width: \"250px\",\r\n                      borderRadius: \"10px\",\r\n                      marginBottom: \"15px\",\r\n                    }}\r\n                  />\r\n                </Badge.Ribbon>\r\n              </div>\r\n            </Spin>\r\n          </Modal>\r\n        ) : (\r\n          <Modal\r\n            title={`Buy ${nftToBuy?.name} #${nftToBuy?.token_id}`}\r\n            visible={visible}\r\n            onCancel={() => setVisibility(false)}\r\n            onOk={() => setVisibility(false)}\r\n          >\r\n            <img\r\n              src={nftToBuy?.image}\r\n              style={{\r\n                width: \"250px\",\r\n                margin: \"auto\",\r\n                borderRadius: \"10px\",\r\n                marginBottom: \"15px\",\r\n              }}\r\n            />\r\n            <Alert\r\n              message=\"This NFT is currently not for sale\"\r\n              type=\"warning\"\r\n            />\r\n          </Modal>\r\n        )}\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default NFTTokenIds;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}